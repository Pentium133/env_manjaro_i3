#!/usr/bin/bash -

function touch_dir(){
  local dir=$1
  if [ ! -d "$dir" ]; then
    mkdir -p $dir
    echo "[$dir] has been created"
  fi
}

function strlen(){
  local str=$1
  echo ${#str}
}

function is_pos(){
  local result=$(($1 < 0))
  return $result;
}

function is_valid_range(){
  local result=$(($1 > $2))
  return $result;
}

function is_valid_abs_range(){
  if is_pos $1 && is_pos $2 && is_valid_range $1 $2; then
    return 0;
  else
    return 1;
  fi
}

function substring(){
  local str=$1
  local from=$2
  local to=$3
  local length=$(strlen $str)

  if ! is_valid_abs_range $from $to ; then
    echo "false"
    return;
  fi

  if (($from > $length)) || (($to > $length)); then
    echo "range [$from, $to] is out of bound string [len=$length]"
    return;
  fi

  local result=${str:$from:$(($to))}
  echo "$result"
}

function drop_right(){
  local str=$1
  local n=$2
  local length=$(strlen $str)

  if (($n > $length)) || (($n < 0)); then
    echo "[n=$n] out of range string [length=$length]"
    return;
  fi

  local from=0
  local to=$length-$n

  local result=$(substring $str $from $to)
  
  echo $result
}

function drop_left(){
  local str=$1
  local n=$2
  local length=$(strlen $str)

  if (($n > $length)) || (($n < 0)); then
    echo "[n=$n] out of range string [length=$length]"
    return;
  fi

  local from=$n
  local to=$length

  local result=$(substring $str $from $to)
  
  echo $result
}

